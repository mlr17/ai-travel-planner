# 高德地图MCP服务功能说明

## 简介

高德地图MCP服务器(Model Context Protocol)是一个强大的地理信息服务接口，为大语言模型提供了直接调用高德地图API的能力。本文档详细说明了在旅行规划应用中可用的高德地图MCP服务功能。

## 主要功能

高德地图MCP服务提供以下核心功能：

### 1. 地理编码与逆地理编码

#### 1.1 地理编码 (Geocode)
将地址文本转换为经纬度坐标。

```javascript
mcp_amap_maps_maps_geo({
  address: "北京市朝阳区望京SOHO",
  city: "北京" // 可选
})
```

**返回数据**：包含经纬度坐标、行政区划等信息。

#### 1.2 逆地理编码 (Regeocode)
将经纬度坐标转换为结构化地址。

```javascript
mcp_amap_maps_maps_regeocode({
  location: "116.480881,39.989410"
})
```

**返回数据**：包含详细地址、所在省市区县等信息。

### 2. POI搜索

#### 2.1 关键词搜索 (Text Search)
根据关键词查询兴趣点(POI)。

```javascript
mcp_amap_maps_maps_text_search({
  keywords: "餐厅",
  city: "上海", // 可选
  types: "餐饮" // 可选，POI类型
})
```

**返回数据**：符合条件的POI列表，包含名称、地址、经纬度等信息。

#### 2.2 周边搜索 (Around Search)
查询指定坐标周边的兴趣点。

```javascript
mcp_amap_maps_maps_around_search({
  location: "116.480881,39.989410",
  radius: "5000", // 搜索半径，单位:米
  keywords: "咖啡" // 可选，搜索关键词
})
```

**返回数据**：周边POI列表，包含距离排序。

### 3. 天气查询

获取指定城市的天气信息。

```javascript
mcp_amap_maps_maps_weather({
  city: "北京" // 城市名称或adcode
})
```

**返回数据**：包含天气状况、温度、风向、湿度等信息。

### 4. 路径规划

#### 4.1 步行路径规划

```javascript
mcp_amap_maps_maps_direction_walking({
  origin: "116.480881,39.989410",
  destination: "116.434446,39.90816"
})
```

**返回数据**：包含路径距离、所需时间、详细步行导航指南等。

#### 4.2 驾车路径规划

```javascript
mcp_amap_maps_maps_direction_driving({
  origin: "116.480881,39.989410",
  destination: "116.434446,39.90816"
})
```

**返回数据**：包含最优路径、所需时间、收费信息、详细导航指南等。

#### 4.3 公共交通路径规划

```javascript
mcp_amap_maps_maps_direction_transit_integrated({
  origin: "116.480881,39.989410",
  destination: "116.434446,39.90816",
  city: "北京",
  cityd: "北京"
})
```

**返回数据**：包含乘坐公交/地铁的换乘方案、步行距离、所需时间等信息。

#### 4.4 骑行路径规划

```javascript
mcp_amap_maps_maps_bicycling({
  origin: "116.480881,39.989410",
  destination: "116.434446,39.90816"
})
```

**返回数据**：包含骑行路线、所需时间、距离和详细导航指南。

### 5. 距离测量

计算两点或多点间的距离。

```javascript
mcp_amap_maps_maps_distance({
  origins: "116.480881,39.989410",
  destination: "116.434446,39.90816",
  type: "1" // 可选，1：驾车距离，0：直线距离，3：步行距离
})
```

**返回数据**：包含距离、时间等信息。

### 6. IP定位

根据IP地址获取位置信息。

```javascript
mcp_amap_maps_maps_ip_location({
  ip: "114.247.50.2"
})
```

**返回数据**：包含IP所在省市、经纬度等信息。

## 在旅行规划中的应用

高德地图MCP服务在旅行规划中的应用场景包括：

1. **目的地查询**：通过地理编码获取目的地精确坐标
2. **景点推荐**：使用周边搜索查找目的地附近的热门景点、餐厅、酒店
3. **行程规划**：使用路径规划功能安排合理的游览路线和交通方式
4. **天气参考**：获取目的地天气信息，帮助用户做好出行准备
5. **地址解析**：将用户输入的地址转换为可在地图上标注的精确坐标
6. **交通时间估算**：使用距离测量计算各景点间的距离和所需时间

## 最佳实践

1. **保存坐标信息**：为每个景点和活动保存精确的经纬度坐标，确保在地图上准确标注
2. **使用多种搜索方式**：先尝试地理编码，如果失败再使用关键词搜索，提高地点解析的成功率
3. **缓存常用数据**：对于常见目的地和景点，可以缓存其坐标和基本信息，减少API调用
4. **提供备选选项**：当某个景点无法找到时，使用周边搜索提供类似的备选景点
5. **组合使用多个功能**：例如，先用地理编码获取坐标，再用周边搜索找附近景点，最后用路径规划制定路线

## 注意事项

1. 所有坐标格式均为"经度,纬度"（例如："116.480881,39.989410"）
2. 路径规划的距离限制：步行规划上限100km，骑行规划上限500km
3. 周边搜索的半径范围建议：1000m-10000m
4. 地理编码结果可能有多个，通常取第一个结果作为最可能的匹配
5. 公共交通规划需要指定起终点所在城市，跨城场景需特别处理

## 示例：完整旅行规划流程

1. 获取目的地坐标：使用地理编码API获取目的地精确坐标
2. 查询目的地天气：了解出行期间的天气情况
3. 搜索周边景点：使用周边搜索API查找附近景点、酒店、餐厅等POI
4. 按兴趣分类：将POI按类型（景点、餐饮、住宿、购物等）分类
5. 生成行程规划：根据POI信息和用户偏好生成每日行程安排
6. 添加交通信息：使用路径规划API计算景点间的交通方式和时间
7. 生成地图标记：将所有活动地点在地图上进行精确标注 